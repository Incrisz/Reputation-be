{
    "openapi": "3.0.0",
    "info": {
        "title": "Business Reputation & Visibility Audit API",
        "description": "A comprehensive API for auditing business online presence, SEO, social media, and Google Business Profile. Provides AI-powered recommendations via GPT-4.",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "Local development server"
        },
        {
            "url": "http://localhost:8000/api",
            "description": "API base path"
        }
    ],
    "paths": {
        "/api/audit/run": {
            "post": {
                "tags": [
                    "Audit"
                ],
                "summary": "Run comprehensive business visibility audit",
                "description": "Executes a complete audit including: Website SEO analysis, Social media detection, Google Business Profile check, OSAT-style technical probes (Lighthouse/HTTP Observatory/extractors), and AI-powered recommendations via OpenAI.",
                "operationId": "91357a67bd5ec58b9b70a5dd0ca10634",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "website_url",
                                    "business_name",
                                    "industry",
                                    "country",
                                    "city",
                                    "target_audience"
                                ],
                                "properties": {
                                    "website_url": {
                                        "description": "Full URL of the business website (required)",
                                        "type": "string",
                                        "format": "url",
                                        "example": "https://example.com"
                                    },
                                    "business_name": {
                                        "description": "Official business name (required)",
                                        "type": "string",
                                        "example": "Acme Digital Solutions"
                                    },
                                    "industry": {
                                        "description": "Business industry or category (required)",
                                        "type": "string",
                                        "example": "Digital Marketing"
                                    },
                                    "country": {
                                        "description": "Country where business operates - can be a string or array of countries (required)",
                                        "example": "United States",
                                        "oneOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        ]
                                    },
                                    "city": {
                                        "description": "City of operation - can be a string or array of cities (required)",
                                        "example": "San Francisco",
                                        "oneOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        ]
                                    },
                                    "target_audience": {
                                        "description": "Description of target customer base (required)",
                                        "type": "string",
                                        "example": "Small to medium-sized businesses looking to improve their digital presence"
                                    },
                                    "competitors": {
                                        "description": "Optional list of competitor websites",
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "https://competitor1.com",
                                            "https://competitor2.com"
                                        ]
                                    },
                                    "keywords": {
                                        "description": "Optional list of target keywords",
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "digital marketing",
                                            "SEO services",
                                            "social media management"
                                        ]
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Audit completed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Audit completed successfully"
                                        },
                                        "input": {
                                            "description": "Echo of input parameters",
                                            "type": "object"
                                        },
                                        "audit_results": {
                                            "properties": {
                                                "website_audit": {
                                                    "properties": {
                                                        "technical_seo": {
                                                            "properties": {
                                                                "score": {
                                                                    "type": "integer",
                                                                    "example": 70
                                                                },
                                                                "ssl_valid": {
                                                                    "type": "boolean",
                                                                    "example": true
                                                                },
                                                                "robots_txt_present": {
                                                                    "type": "boolean",
                                                                    "example": true
                                                                },
                                                                "sitemap_xml_present": {
                                                                    "type": "boolean",
                                                                    "example": true
                                                                },
                                                                "page_speed_estimate": {
                                                                    "type": "string",
                                                                    "example": "unknown"
                                                                }
                                                            },
                                                            "type": "object"
                                                        },
                                                        "content_quality": {
                                                            "type": "object"
                                                        },
                                                        "local_seo": {
                                                            "type": "object"
                                                        },
                                                        "security_trust": {
                                                            "type": "object"
                                                        },
                                                        "ux_accessibility": {
                                                            "type": "object"
                                                        },
                                                        "brand_consistency": {
                                                            "type": "object"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "social_media_presence": {
                                                    "type": "object"
                                                },
                                                "google_business_profile": {
                                                    "type": "object"
                                                },
                                                "ai_recommendations": {
                                                    "properties": {
                                                        "content": {
                                                            "type": "string",
                                                            "example": "Prioritize fixing missing robots.txt and sitemap, add meta descriptions..."
                                                        },
                                                        "success": {
                                                            "type": "boolean",
                                                            "example": true
                                                        },
                                                        "model_used": {
                                                            "type": "string",
                                                            "example": "gpt-4o-mini"
                                                        },
                                                        "tokens_used": {
                                                            "type": "object",
                                                            "nullable": true
                                                        },
                                                        "note": {
                                                            "type": "string",
                                                            "nullable": true
                                                        },
                                                        "error": {
                                                            "type": "string",
                                                            "nullable": true
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "metadata": {
                                            "properties": {
                                                "model_used": {
                                                    "type": "string",
                                                    "example": "gpt-4o-mini"
                                                },
                                                "audit_method": {
                                                    "type": "string",
                                                    "example": "manual_fetch_with_osat_probes_and_ai_recommendations"
                                                },
                                                "timestamp": {
                                                    "type": "string",
                                                    "example": "2025-12-16T10:44:23+00:00"
                                                },
                                                "execution_time": {
                                                    "type": "string",
                                                    "example": "14.54 seconds"
                                                },
                                                "note": {
                                                    "type": "string",
                                                    "example": "OSAT probes added; AI recommendations included; social/GBP web search disabled."
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "example": "2025-12-16T10:44:23+00:00"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Validation failed"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Audit failed"
                                        },
                                        "error": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "tags": [
        {
            "name": "Audit",
            "description": "Audit"
        }
    ]
}
